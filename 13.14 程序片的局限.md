# 13.14 程序片的侷限

出於安全緣故，程序片十分受到限制，並且有很多的事我們都不能做。您一般會問：程序片看起來能做什麼，傳聞它又能做什麼：擴展瀏覽器中WEB頁的功能。自從作為一個網上衝浪者，我們從未真正想了解是否一個WEB頁來自友好的或者不友好的站點，我們想要一些可以安全地行動的代碼。所以我們可能會注意到大量的限制：

(1) 一個程序片不能接觸到本地的磁盤。這意味著不能在本地磁盤上寫和讀，我們不想一個程序片通過WEB頁面閱讀和傳送重要的信息。寫是被禁止的，當然，因為那將會引起病毒的侵入。當數字簽名生效時，這些限制會被解除。

(2) 程序片不能擁有菜單。（注意：這是規定在Swing中的）這可能會減少關於安全和關於程序簡化的麻煩。我們可能會接到有關程序片協調利益以作為WEB頁面的一部分的通知；而我們通常不去注意程序片的範圍。這兒沒有幀和標題條從菜單處彈出，出現的幀和標題條是屬於WEB瀏覽器的。也許將來設計能被改變成允許我們將瀏覽器菜單和程序片菜單相結合起來——程序片可以影響它的環境將導致太危及整個系統的安全並使程序片過於的複雜。

(3) 對話框是不被信任的。在Java中，對話框存在一些令人難解的地方。首先，它們不能正確地拒絕程序片，這實在是令人沮喪。如果我們從程序片彈出一個對話框，我們會在對話框上看到一個附上的消息框“不被信任的程序片”。這是因為在理論上，它有可能欺騙用戶去考慮他們在通過WEB同一個老顧客的本地應用程序交易並且讓他們輸入他們的信用卡號。在看到AWT開發的那種GUI後，我們可能會難過地相信任何人都會被那種方法所愚弄。但程序片是一直附著在一個Web頁面上的，並可以在瀏覽器中看到，而對話框沒有這種依附關係，所以理論上是可能的。因此，我們很少會見到一個使用對話框的程序片。

在較新的瀏覽器中，對受到信任的程序片來說，許多限制都被放寬了（受信任程序片由一個信任源認證）。

涉及程序片的開發時，還有另一些問題需要考慮：

+   程序片不停地從一個適合不同類的單獨的服務器上下載。我們的瀏覽器能夠緩存程序片，但這沒有保證。在Java 1.1版中的一個改進是JAR（Java ARchive）文件，它允許將所有的程序片組件（包括其它的類文件、圖像、聲音）一起打包到一個的能被單個服務器處理下載的壓縮文件。“數字簽字”（能校驗類創建器）可有效地加入每個單獨的JAR文件。
+   因為安全方面的緣故，我們做某些工作更加困難，例如訪問數據庫和發送電子郵件。另外，安全限制規則使訪問多個主機變得非常的困難，因為每一件事都必須通過WEB服務器路由，形成一個性能瓶頸，並且單一環節的出錯都會導致整個處理的停止。
+   瀏覽器裡的程序片不會擁有同樣的本地應用程序運行的控件類型。例如，自從用戶可以開關頁面以來，在程序片中不會擁有一個形式上的對話框。當用戶對一個WEB頁面進行改變或退出瀏覽器時，對我們的程序片而言簡直是一場災難——這時沒有辦法保存狀態，所以如果我們在處理和操作中時，信息會被丟失。另外，當我們離開一個WEB頁面時，不同的瀏覽器會對我們的程序片做不同的操作，因此結果本來就是不確定的。

## 13.14.1 程序片的優點

如果能容忍那些限制，那麼程序片的一些優點也是非常突出的，尤其是在我們構建客戶／服務器應用或者其它網絡應用時：

+   沒有安裝方面的爭議。程序片擁有真正的平臺獨立性（包括容易地播放聲音文件等能力）所以我們不需要針對不同的平臺修改代碼也不需要任何人根據安裝運行任何的“tweaking”。事實上，安裝每次自動地將WEB頁連同程序片一起，因此安靜、自動地更新。在傳統的客戶端/服務器系統中，建立和安裝一個新版本的客戶端軟件簡直就是一場惡夢。
+   因為安全的原因創建在核心Java語言和程序片結構中，我們不必擔心壞的代碼而導致毀壞某人的系統。這樣，連同前面的優點，可使用Java（可從JavaScript和VBScript中選擇客戶端的WEB編程工具）為所謂的Intrant（在公司內部使用而不向Internet轉移的企業內部網絡）客戶端/服務器開發應用程序。
+   由於程序片是自動同HTML集成的，所以我們有一個內建的獨立平臺文件系統去支持程序片。這是一個很有趣的方法，因為我們慣於擁有程序文件的一部分而不是相反的擁有文件系統。
